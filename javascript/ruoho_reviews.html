<!DOCTYPE HTML>
<!--
	Based on Halcyonic 3.1 by HTML5 UP html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
	
	developed by iroro orife, 2013-2014
-->
<html>

	<head>
		<title>ruoho reviews</title>
		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<script src="js/jquery.min.js"></script>
		<script src="js/config.js"></script>
		<script src="js/skel.min.js"></script>
		<script src="js/skel-panels.min.js"></script>

		<script src="src/rita_dict.js" type="text/javascript"></script>
		<script src="src/rita.js" type="text/javascript"></script>
		<script src="src/ruoho_reviews.js" type="text/javascript"></script>
		<script src="src/artistMetaData.js" type="text/javascript"></script>
		<script src="src/jquery.echonest.js" type="text/javascript"></script>
		
		<noscript>
			<link rel="stylesheet" href="css/skel-noscript.css" />
			<link rel="stylesheet" href="css/style.css" />
			<link rel="stylesheet" href="css/style-desktop.css" />
		</noscript>
		<!--[if lte IE 9]><link rel="stylesheet" href="css/ie9.css" /><![endif]-->
		<!--[if lte IE 8]><script src="js/html5shiv.js"></script><![endif]-->
	</head>
	
	<body>		
		<script type="text/javascript">
		
		/*
		// Twitter integration	
		window.twttr = (function (d,s,id) {
		  var t, js, fjs = d.getElementsByTagName(s)[0];
		  if (d.getElementById(id)) return; js=d.createElement(s); js.id=id;
		  js.src="https://platform.twitter.com/widgets.js"; fjs.parentNode.insertBefore(js, fjs);
		  return window.twttr || (t = { _e: [], ready: function(f){ t._e.push(f) } });
		}(document, "script", "twitter-wjs"));
		
		$(document).ready(function(){
				$('a[data-text]').each(function(){
					// console.log($('#reviewArtist').html);
					
				  $(this).attr('data-text', "This works!");
				});
				$.getScript('http://platform.twitter.com/widgets.js');
			});
		*/	


		//////////////////////////////////////////////////////////////////////////////////
		// A Context-Free grammar for Generative Music Criticism by iroro 
		// V0.1 2009.11.06 (Processing, unreleased)
		// V0.2 2013.01.15 (Javascript)
		//
		//////////////////////////////////////////////////////////////////////////////////

		// RiTa.p5Compatible(1);
		var reviewRiGrammar, labelyearRiGrammar;
		
		var echonest; 		
		var currentArtist = {name:"", index:-1};

		var numHotttArtists = 50;		
		var hotttArtistsImages = [];
		
		var globalCounter = 0;

		var cachedArtistList = ['Moby', 'Donna Summer', 'Robbie Williams', 
								'Pet Shop Boys', 'Prince', 'Sly and the Family Stone',
								'David Bowie', 'Marvin Gaye', 'Aretha Franklin', 
								'Juan Atkins', 'Michael Jackson', 'Stevie Wonder', 
								'Led Zeppelin', 'Pink Floyd', 'Rihanna', 'Tina Turner',
								'Johnny Hallyday', 'Gloria Estefan', 'Tupac Shakur', 
								'Depeche Mode', 'Björk', 'Daft Punk', 'Aphex Twin', 
								'Prodigy', 'Kraftwerk', 'Massive Attack',
								'DJ Shadow', 'Radiohead', 'The Orb', 'Jean-Michel Jarre',
								'Röyksopp', 'LCD Soundsystem', 'Faithless', 'Ruoho Ruotsi',
								'Ratatat', 'Postal Service', 'Wilco', 'The Avett Brothers',
								'Tangerine Dream', 'Leftfield', 'Frivolous', 'Basement Jaxx',
								'Boards of Canada', 'Amon Tobin', 'Glitch Mob', 
								'Hollis P. Monroe', 'Frankie Knuckles', 'Francois K',
								'Trentemøller', 'Chelonis R. Jones', 'Steve Bug', 
								'Lawrence', 'Jimpster', 'Jeff Samuel', 'Ian Pooley',
								'Omar-S', 'Luomo', 'Kerri Chandler', 'Charles Webster',
								'Roy Davis Jr.', 'Robert Owens', 'Cajmere feat. Dajae',
								'Black Science Orchestra', 'Mr. Fingers', 'Saint Etienne',
								'Masters at Work', 'Theo Parrish', 'Moodymann', 
								'Pepe Bradock', 'Chez N Trent', 'Basic Channel', 
								'Rhythm & Sound', 'Roman Flügel', 'Joe Lewis', 'DJ Said', 
								'Recloose', 'Kate Simko', 'Aschka', 'Ikonika', 
								'Maya Jane Coles'];
								
		var cachedAlbumList = ['Back with Spaces', 'Greatest Hits (1999-2009)', 'The Tropical Side', 
								'Dirty Twerking', 'Let\'s Talk', 'Dirty Little Pills',
								'Afternoon Delighting', 'Cali Music Boxen', 'Gough & Franklin', 
								'The Dysphoria Blues', 'My Heart', 'The Fornication Tapes', 
								'Good', 'Super Theory',
								'Sexy Chicas Locas', 'Off Probation', 'Milking Me Softly', 
								'Give Me My Flowers', 'Against The World', 'Blunted', 
								'Sweating The Techniques', 'Runaways', '909s & Heartache', 
								'No Free Rides', 'Tripping on Bath Salts', 'Lies & Counterfeit',
								'Uprightly Minded', 'Sub Bass Theory', 'Liquid Swords',
								'Licensed In Chill', 'Twice Removed From Today',
								'For Mars Above', 'Bridge of Sighs', 'City of Tears',
								'Caravan To The Edge', 'Midnight On The Edge', 'A Hate Supreme',
								'Karma Island', 'Crimson Edge', 'Who Came Next', 
								'Highway 101', 'Aeros Over The Sea', 'Miami Calling',
								'After Tonight', 'Crazy Horse', 'This is Nowhere', 
								'Under A Groove', 'Down Stroke', 'Clone Soul', 
								'Millions of Rubbers', 'Miseducation Banquet', 'Beggars Hill',
								'Sticky Changes', 'Exile on Wall St.', 'Closing Time',
								'Elevation', 'More Songs About Rabbits', 'Cosmic Rising',
								'Silently Transgender', 'Here Comes The Warm Light', 
								'Your Seduction', 'Closer Now', 'Oceanview', 'Just A Day',
								'Aurora\'s Eternal Son', 'Things Fall Apart Again', 'The Return',
								'Unquestionable Doubt', 'Freedom Jazz', 'Postively Leptokurtic',
								'Bramble Brambles', 'Dolores Tristes', 'Brilliant Deafness',
								'Unified Fires', 'Astral Minds', 'Being Here', 'Vulgar Ambulance',
								'Shut The F**k Up', 'Trout Face Paranoia', 'Toys From The Destruction',
								'Pure Grit', 'Conveniently Dead', 'Fear Of Weasel Flesh',
								'The Goodfinger Chronicles', 'My White Keyboard', 'Indigo',
								'Ghost In The Club'];
											
								
		// setup
		window.onload = setupCached; // setup; // ;
		// window.onmouseup = mouseClicked_Cached; // mouseClicked; // ;

		//////////////////////////////////////////////////////////////////////////////////
		function setupCached()
		{
			// read in cached version of 
			//var cached = JSON.parse(cachedHotttArtists);	
			console.log(cachedHotttArtists);
			
			reviewRiGrammar = new RiGrammar(reviewGrammar);
			labelyearRiGrammar = new RiGrammar(labelYearGrammar);
			
			mouseClicked_Cached();
			console.log("setupCached completed");
		}

		//////////////////////////////////////////////////////////////////////////////////
		function mouseClicked_Cached()
		{
			var aReview = reviewRiGrammar.expand();
			var labelyear = labelyearRiGrammar.expand();
			// console.log(aReview);
			
			// Populate html elements
			document.getElementById("ruohoreviews").innerHTML = aReview;
			document.getElementById("reviewSubtitle").innerHTML = labelyear;
						
			getAlbumName();	
			getHotttRating();
			getCurrentArtist();
			getCurrentArtistImage_Cached();		
			getCurrentArtistTwitterURL_Cached();		
		}
		
		
		//////////////////////////////////////////////////////////////////////////////////
		function getHotttArtists_Cached() // get a random Hottt artist
		{							
			var rand = Math.floor((Math.random()*cachedHotttArtists.length));
			currentArtist.name = cachedHotttArtists[rand].artist.name;
			currentArtist.index = rand;
	
			console.log(currentArtist);
	
			return currentArtist.name;	
		}
		
		
		//////////////////////////////////////////////////////////////////////////////////
		function getCurrentArtistImage_Cached() 
		{			
			console.log(cachedHotttArtists[currentArtist.index].images);
			
			// random selection from image array
			var imageList = cachedHotttArtists[currentArtist.index].images;
			var imageIndex = Math.floor(Math.random()*imageList.length); console.log(imageIndex);
			document.getElementById("artistImages").src = imageList[imageIndex].url;
		}


		//////////////////////////////////////////////////////////////////////////////////
		function getCurrentArtistTwitterURL_Cached() 
		{	
			// random selection from image array
			var urlList = cachedHotttArtists[currentArtist.index].URLs;
			console.log(urlList);

			var a = document.getElementById('artistTwitter');

			var link = urlList["twitter_url"];
			a.title = "Twitter";
			a.innerHTML = "Artist Twitter";
		
			if(!link) {		
				link =  urlList["wikipedia_url"];
				a.title = "Wikipedia";
				a.innerHTML = "Artist Wikipedia";
			}
			if(!link) {	
				link =  urlList["myspace_url"];
				a.title = "Myspace";
				a.innerHTML = "Artist Myspace";					
			}
			if(!link) {	
				link =  urlList["lastfm_url"];
				a.title = "LastFM";
				a.innerHTML = "Artist LastFM";										
			}				
			if(!link) {	
				link =  urlList["official_url"];
				a.title = "Official Website";
				a.innerHTML = "Artist Website";															
			}							
			if(!link) {	
				link =  " ";
				a.innerHTML = " ";	
			}
		
			a.href = link;

		}

		//////////////////////////////////////////////////////////////////////////////////
		//////////////////////////////////////////////////////////////////////////////////
		//////////////////////////////////////////////////////////////////////////////////
		function setup()
		{
			setupEchoNest();
			
			reviewRiGrammar = new RiGrammar(reviewGrammar);
			labelyearRiGrammar = new RiGrammar(labelYearGrammar);
			
			mouseClicked();
			console.log("setup completed");
			
			/*		
			document.getElementById('custom-tweet-button').addEventListener('click', function (el) {
			  el.target.href = "https://twitter.com/intent/tweet?text=" + 
			  	document.getElementById("ruohoreviews").innerHTML;
			});	
			*/
		}


		//////////////////////////////////////////////////////////////////////////////////
		function setupEchoNest()
		{
			// Setup The echonest
			echonest = new EchoNest("2VN1LKJEQUBPUKXEC"); // API key
			
			// Populate object array with artists are currently "hottt"
			echonest.artist().top_hottt( function(topHotttCollection) {
				
				// console.log(topHotttCollection.data.artists);
				
				for(var i = 0; i < topHotttCollection.data.artists.length; i++) {
				
					hotttArtistsImages.push( { 
 							artist: topHotttCollection.data.artists[i], 
 							images: {}, 
 							videos: {},
 							URLs: {}
 					} );

				}		
			}, {results: numHotttArtists});			
		}


		//////////////////////////////////////////////////////////////////////////////////
		function mouseClicked()
		{
			var aReview = reviewRiGrammar.expand();
			var labelyear = labelyearRiGrammar.expand();
			// console.log(aReview);
			
			// Populate html elements
			document.getElementById("ruohoreviews").innerHTML = aReview;
			document.getElementById("reviewSubtitle").innerHTML = labelyear;
						
			getAlbumName();	
			getHotttRating();
			getCurrentArtist();
			getCurrentArtistImage();		
			getCurrentArtistTwitterURL();

			// console.log(document.getElementById("ruohotweet"));	
			// console.log(JSON.stringify(hotttArtistsImages));				
		}
		

		//////////////////////////////////////////////////////////////////////////////////
		function getHotttArtists() // get a random Hottt artist
		{	
			var randCachedArtist = Math.floor((Math.random()*cachedArtistList.length));
			currentArtist.index = -1;
			
			if(hotttArtistsImages.length == 0) {

				currentArtist.name = cachedArtistList[randCachedArtist];
				return currentArtist.name;

			} else {

				var useCharts = 1; // Math.floor(Math.random()*2); // Choice of RR faves or charts!
				
				if(useCharts) {				
					/* var rand = Math.floor((Math.random()*hotttArtistsImages.length));
					currentArtist.name = hotttArtistsImages[rand].artist.name;
					currentArtist.index = rand; */
					
					currentArtist.name = hotttArtistsImages[globalCounter].artist.name;
					currentArtist.index = globalCounter;
					
					console.log(currentArtist);
					globalCounter++;

				} else {				
				 	currentArtist.name = cachedArtistList[randCachedArtist];
				}
				
				return currentArtist.name;	
			}
		}


		//////////////////////////////////////////////////////////////////////////////////
		function getAlbumName() 
		{
			// console.log(cachedAlbumList.length);
			var rand = Math.floor((Math.random()*87));
			document.getElementById("reviewTitle").innerHTML = cachedAlbumList[rand];
		}
			
				
		//////////////////////////////////////////////////////////////////////////////////
 		function getHotttRating() // get a random Hottt artist rating
 		{	 
 			document.getElementById("ruohorating").innerHTML = 
 				"Ruoho Rating:  &nbsp;&nbsp;" + 
 				Math.floor((Math.random()*100)) + "." + Math.floor((Math.random()*10));
 		}

 		
		//////////////////////////////////////////////////////////////////////////////////
 		function getCurrentArtist() // get current artist
 		{	 
 			document.getElementById("reviewArtist").innerHTML = currentArtist.name;
 		}


		//////////////////////////////////////////////////////////////////////////////////
		function getCurrentArtistImage() 
		{			
			// get an artist images
			echonest.artist(currentArtist.name).images( function(imageCollection) {
								
				if(imageCollection.data.images.length > 0) {
					
					// Add imageCollection to artistList, if not from cached list (for now)
					if(currentArtist.index != -1) { 
						hotttArtistsImages[currentArtist.index].images = imageCollection.data.images;
					}
					
					// random selection from image array
					var imageIndex = Math.floor(Math.random()*imageCollection.data.images.length);
					document.getElementById("artistImages").src = imageCollection.data.images[imageIndex].url;
				}
				else {} // IO HAVOC : TODO - add stock images from disk here
				
			}, {results: 5});
		}

		//////////////////////////////////////////////////////////////////////////////////
		function getCurrentArtistTwitterURL() 
		{					
			echonest.artist(currentArtist.name).urls( function(urlsCollection) {
				
				var a = document.getElementById('artistTwitter');

				var link = urlsCollection.data.urls["twitter_url"];
				a.title = "Twitter";
				a.innerHTML = "Artist Twitter";
				
				if(!link) {		
					link =  urlsCollection.data.urls["wikipedia_url"];
					a.title = "Wikipedia";
					a.innerHTML = "Artist Wikipedia";
				}
				if(!link) {	
					link =  urlsCollection.data.urls["myspace_url"];
					a.title = "Myspace";
					a.innerHTML = "Artist Myspace";					
				}
				if(!link) {	
					link =  urlsCollection.data.urls["lastfm_url"];
					a.title = "LastFM";
					a.innerHTML = "Artist LastFM";										
				}				
				if(!link) {	
					link =  urlsCollection.data.urls["official_url"];
					a.title = "Official Website";
					a.innerHTML = "Artist Website";															
				}							
				if(!link) {	
					link =  " ";
					a.innerHTML = " ";	
				}
				
				a.href = link;
				
				// Add urls to artistList, if not from cached list (for now)
				if(currentArtist.index != -1) { 
				 	hotttArtistsImages[currentArtist.index].URLs = urlsCollection.data.urls;
				}
	
				// console.log("currentArtist: " + currentArtist.name + " " + currentArtist.index);
				// console.log(hotttArtistsImages);
			});
		}
		
		</script>


		
		<!-- Header -->
			<div id="header-wrapper">
				<header id="header" class="container">
					<div class="row">
						<div class="12u">

							<!-- Logo -->
								<h1><a href="#" id="logo">ruoho reviews &#8230</a></h1>
							
							<!-- Nav -->
								<nav id="nav">
								</nav>

						</div>
					</div>
				</header>
			</div>

		<!-- Content -->
			<div id="content-wrapper">
				<div id="content">
					<div class="container">
						<div class="row">
							<div class="3u">
								
								<!-- Sidebar -->
									<section>
										<header>
											<h5 id="reviewArtist">Artist</h2>
											<!-- <h2 id="reviewArtist" style="font-size: 30pt;">Artist</h2> -->
										</header>
										<img id="artistImages" src="" width="200"/>

										<ul class="link-list">
											<li><a href="" id="artistTwitter">Artist Info</a></li>
											<li>Reviews</li>
											<li>Play this artist</li>
										</ul>

										<p><h4 id="ruohorating"></h4></p> 
										<!-- <p id="ruohorating" style="font-size: 20pt;"> -->
									</section>		
							</div>
							<div class="9u skel-cell-important">
								
								<!-- Main Content -->
									<section>
										<header>
											<h2 id="reviewTitle">Album Title</h2>
											<h3 id="reviewSubtitle">Label and year</h3>
										</header>
										
										<p><h4 id="ruohoreviews"></h4></p> 
										<!-- <p id="ruohoreviews" style="font-size: 24pt;"></p> -->

										<!-- <a id="custom-tweet-button"></a> -->
										
										<style type="text/css" media="screen">
										  #custom-tweet-button a {
											display: block;
											padding: 2px 5px 2px 20px;
											background: url('https://twitter.com/favicons/favicon.ico') 1px center no-repeat;
										  }
										</style>
 
 										<!--
										<div id="custom-tweet-button">
										  <a href="https://twitter.com/intent/tweet">Tweet</a>
										</div> -->
										
									<!-- <a href="http://twitter.com/share"
										class="twitter-share-button"
										data-text="This is what we want to change dynamically"
										data-count="none" data-via="chris_camps" data-size="large">Tweet</a> -->
										
										
										<a href="#" class="button" onclick="mouseClicked_Cached()">Another review</a>
									</section>
							</div>
						</div>
					</div>
				</div>
			</div>

		<!-- Footer -->
			<div id="footer-wrapper">
				<footer id="footer" class="container">
					<div class="row">
						<div class="8u">
						
							<!-- About -->
							<h2>About Ruoho Reviews</h2>
								<p>
								As an indie label manager <a href="http://defchild.com/artists/">Ruoho Ruotsi</a> 
								wrote copy for artist profiles, featured releases, promo reviews, tweets, onesheets, 
								blog posts & online commentary, amassing a prodigious collection of musical phrases,
								idiomatic expressions and colourful constructions.
								 
								<br/>These reviews are fashioned using Ruoho's custom 
								<a href="http://en.wikipedia.org/wiki/Context-free_grammar">context-free grammar</a> 
								(<a href="https://github.com/dhowe/RiTa/">RiTa</a>) and "hottt" artist 
								<a href="http://developer.echonest.com/docs/v4/artist.html#top-hottt">charts</a> 
								pulled down in realtime from <a href="http://developer.echonest.com">The Echo Nest</a>. 
								Ruoho hopes these reviews will dislodge writer's block, suggest new musical vistas, 
								creative possibilities, artist collaborations and perhaps garner a few chuckles.
								Get in touch, if you want a specific Artist, Band, Album or Label added to our database.
								
								<br/><br/>For entertainment purposes only.</p>						
						</div>															
						
						<div class="4u">
							
							<!-- Socialize -->
								<section>
									<h2>   &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; Socialize</h2>
									
									<ul class="icons">
										<li><a class="fa fa-twitter solo" href="http://twitter.com/ruohoreviews"><span>Twitter</span></a></li>
										<li><a class="fa fa-youtube solo" href="http://youtube.com/ruohoreviews"><span>Youtube</span></a></li>
										<li><a class="fa fa-github solo" href="http://github.com/ruohoruotsi"><span>LinkedIn</span></a></li>
									</ul>
								</section>
				
						</div>
					</div>
				</footer>
			</div>

		<!-- Copyright -->
			<div id="copyright">
				&copy; 2013-2014 iroro orife. &nbsp;All rights reserved. &nbsp;|&nbsp; Design: <a href="http://html5up.net">HTML5 UP</a>
			</div>


	</body>
</html>