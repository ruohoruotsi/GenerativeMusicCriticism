<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<title>de'fchild reviews </title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Context-free reviews">
    <meta name="author" content="Ruoho Ruotsi">

    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
</head>


<body>
<!-- <canvas id="canvas" width=200 height=200 style="border: 1px solid #000000;"></canvas> -->
<div style="text-align:center">
<canvas id="canvas" width=200 height=200></canvas>
</div>

<script src="src/rita_dict.js" type="text/javascript"></script>
<script src="src/rita.js" type="text/javascript"></script>
<script src="src/defchild_reviews.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.4.4.js" type="text/javascript"></script>
<script src="http://ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js" type="text/javascript"></script>
<script src="src/jquery.echonest.js" type="text/javascript"></script>



<script type="text/javascript">

////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
// A Context-Free grammar for Generative Music Criticism by iroro 
// V0.1 2009.11.06 (Processing, unreleased)
// V0.2 2013.01.15 (Javascript)
//
////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

RiTa.p5Compatible(1);
var grammar, rts, hotttartists = [];
var echonest; 

// setup mouse-handling
window.onload = setup;
window.onmouseup = mouseClicked;

function setup()
{
	// Setup The echonest
	echonest = new EchoNest("2VN1LKJEQUBPUKXEC"); // API key
	var x = 1;

	// What artists are currently "hottt" (this should return a hotttnesss value but doesn't)
	echonest.artist().top_hottt( function(topHotttCollection) {
		// console.log(topHotttCollection.data.artists[0].name);
		hotttartists = topHotttCollection.data.artists;			
	    // $('#artistTopHottt').append( topHotttCollection.to_html('<strong>${name}</strong><br/>') );
	});

	// What terms are currently "hottt" (this should return a hotttnesss value but doesn't)
	// echonest.artist().top_terms( function(topTermsCollection) {
	//	$('#artistTopTerms').append( topTermsCollection.to_html('<strong>${name}</strong> - ${frequency}<br/>') );
	// });

	// HTML5 Canvas size
    RiText.size(800, 600);

    RiText.defaults.paragraphLeading = 15;
    RiText.defaultFont({name:"Georgia", size:32, leading:36}); // leading is vertical spacing
    // RiText.defaultAlignment(LEFT);
/*
    rts[0] = new RiText("to generate a review", RiText.width() / 6, 75);
    rts[1] = new RiText("Ã  la Boomkat clicky", RiText.width() / 6, 110);
    rts[2] = new RiText("for serious enjoyment ", RiText.width() / 6, 145); 
*/

    grammar = new RiGrammar(reviewGrammar);
    RiText.loop();
    console.log("Setup complete");
}

function draw()
{
    RiText.background(255, 255, 255);
    RiText.drawAll();
}

function mouseClicked()
{
	RiText.disposeAll(); // cleanup

    var result = grammar.expand();
    var x=75, y=50, w=675, h=500; 
    rts = RiText.createLines(result, x, y, w, h);
   	
	/* extras
	for ( var i = 0; i < rts.length; i++) 
    	rts[i].color(RiText.randomColor()); */
    	
    console.log(result);
    document.getElementById("ruohoreviews").innerHTML=result;
}

function getHotttArtists()
{	 
	// get a random Hottt artist
	var rand = Math.floor((Math.random()*15));
	return hotttartists[rand].name;
}

</script>

<h3>Ruoho Reviews</h3>
<p id="ruohoreviews"> asdfasda</p>

		<h3>Current Top Hottt Artists</h3>
		<div id="getHotttArtists"></div>

		<h3>Current Top Terms</h3>
		<div id="artistTopTerms"></div> -->
		
</body>
</html>